<!DOCTYPE html>
<!--
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.7
Version: 4.7
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Dribbble: www.dribbble.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
Renew Support: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]> <html lang="zh" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="zh" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta charset="utf-8" />
    <title>登录示例</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="nuoke" name="description" />
    <meta content="kagula" name="author" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="assets/font.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="assets/pages/css/login-4.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="favicon.ico" /> </head>
<!-- END HEAD -->

<body class=" login">
    <!-- BEGIN LOGO -->
    <div class="logo">
        <a href="index.html">
            <img src="assets/pages/img/logo-big.png" alt="" />
        </a>
    </div>
    <!-- END LOGO -->
    <!-- BEGIN LOGIN -->
    <div class="content">
        <!-- BEGIN LOGIN FORM -->
        <form action="javascript:;" id="loginForm" class="login-form" method="post">
            <h3 class="form-title">请输入你的帐号</h3>
            <div class="alert alert-danger display-hide" id="kagula_alert">
                <button class="close" data-close="alert"></button>
                <span id="kagula_message"> 请输入帐号和密码. </span>
            </div>
            <div class="form-group">
                <!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
                <label class="control-label visible-ie8 visible-ie9">用户名</label>
                <div class="input-icon">
                    <i class="fa fa-user"></i>
                    <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="请在这里输入用户名" name="username" id="username" autofocus />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label visible-ie8 visible-ie9">密码</label>
                <div class="input-icon">
                    <i class="fa fa-lock"></i>
                    <input class="form-control placeholder-no-fix" type="password" autocomplete="off" placeholder="请在这里输入密码" name="password" id="password" />
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn green pull-right"> 登录 </button>
            </div>
        </form>
        <!-- END LOGIN FORM -->
    </div>
    <!-- END LOGIN -->
    <!-- BEGIN COPYRIGHT -->
    <div class="copyright"> 2017 &copy; 宁波老开教育软件开发有限公司 - 前端实现演示. </div>
    <!-- END COPYRIGHT -->
    <!--[if lt IE 9]>
    <script src="../assets/global/plugins/respond.min.js"></script>
    <script src="../assets/global/plugins/excanvas.min.js"></script>
    <script src="../assets/global/plugins/ie8.fix.min.js"></script>
    <![endif]-->
    <!-- BEGIN CORE PLUGINS -->
    <script src="assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>

    <script src="assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/backstretch/jquery.backstretch.min.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL SCRIPTS -->
    <script src="assets/global/scripts/app.min.js" type="text/javascript"></script>
    <!-- END THEME GLOBAL SCRIPTS -->
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="assets/pages/scripts/login-4.min.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL SCRIPTS -->
    <!-- BEGIN THEME LAYOUT SCRIPTS -->
    <!-- END THEME LAYOUT SCRIPTS -->

    <script src="controller/config.js"></script>

    <script type="text/javascript">
        $(function(){
        /////////////////登录提交////////////////////////////
        $("#loginForm").submit(function() {
        var username=$("#username").val();
        var password=$("#password").val();

        if(!username)
        {
        $("span#kagula_message").text("请输入帐号");
        return;
        }

        if(!password)
        {
        $("span#kagula_message").text("请输入密码");
        return;
        }

        var json_obj_data={userName:username,password:password};//现在不需要json对象
        //var url="/login.do";
        var url=url_prefix + "webccDemo/login.do";

        console.log('userName=' + username + ",password=" + password);

        $.ajax({
        type : "POST",
        url : url,
        //data : 'data='+JSON.stringify(data),//json字符串作爲data參數的值上傳.
        data : 'username='+username+'&password='+password,
        //data : json_obj_data,
        //dataType : "text",
        //async: true,
        success : function(result) {
        //objRes = JSON.parse(result);//如果返回的是json字符串, 需要解析一下.
        objRes = result;
        if (objRes.ok==1) {
        console.log('Login Success!');
        //location.href="/main/login.do";
        location.href = "./main.html";
        } else {
        console.log('Login Failed: ' + objRes.msg);
        $("span#kagula_message").text("用户名或密码出错");
        $("div#kagula_alert").css("display", "block");
        }
        },
        error : function(XMLHttpRequest, textStatus, errorThrown) {
        if(textStatus=="timeout")
        {
        $("span#kagula_message").text("超时，请检查网络连接...");
        $("div#kagula_alert").css("display", "block");
        } else
        {
        $("span#kagula_message").text("网络连接錯誤...");
        $("div#kagula_alert").css("display", "block");

        /*jqXHR对象的信息*/
        console.log('jqXHR.responseText --> ',XMLHttpRequest.responseText);
        console.log('jqXHR.status --> ',XMLHttpRequest.status);
        console.log('jqXHR.readyState --> ',XMLHttpRequest.readyState);
        console.log('jqXHR.statusText --> ',XMLHttpRequest.statusText);
        /*其他两个参数的信息*/
        console.log('textStatus --> ',textStatus);
        console.log('errorThrown --> ',errorThrown);
        }
        }
        });
        return false;
        });
        });
    </script>
</body>
</html>